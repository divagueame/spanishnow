<div id="<%= dom_id lesson %>" class="container">
  <p>
    <strong>Title:</strong>
    <%= lesson.title %>
  </p>

  <p>
    <strong>Description:</strong>
    <%= lesson.description %>
  </p>

  <% if current_user.admin? then %>
    <p>
      <strong>Product:</strong>
      <%= lesson.product_id %>
    </p>
  <% end %>

<h1>HIER!</h1>

<div class="inline-block text-sm px-4 py-2 leading-none rounded no-underline text-gray hover:text-gray-900 hover:bg-white mt-4 lg:mt-0">
  <div class="relative" data-controller="dropdown">
    <div data-action="click->dropdown#toggle click@window->dropdown#hide" role="button" data-dropdown-target="button" tabindex="0" class="inline-block select-none">
      <span class="appearance-none flex items-center inline-block text-gray-700">
        <% if current_user %>
          <%= image_tag  'icons/more', class: "rounded-full h-8 w-8 align-middle" %>
        <% end %>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="h-4 w-4"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg>
      </span>
    </div>
    <div data-dropdown-target="menu" class="absolute right-0 mt-2 hidden">
      <div class="bg-white shadow rounded border overflow-hidden">
          <%= link_to 'Profile',  root_path, data: {action: "click->dropdown#toggle"}, class: 'no-underline block pl-8 py-3 text-gray-900 bg-white hover:bg-gray-300 whitespace-nowrap' %>
          <%= link_to 'Password', root_path, data: {action: "click->dropdown#toggle"}, class: 'no-underline block px-8 py-3 text-gray-900 bg-white hover:bg-gray-300 whitespace-nowrap' %>
      </div>
    </div>
  </div>
</div>


  <div class="p-1 container">
    <% lesson.lesson_blocks.each do |block| %>
      <div class="mb-1 border-red-100 border-width-1 "> 
            <h3 class="mr-auto"><%= block.title %></h3>
            

        <div class="relative">
          <%= image_tag 'icons/more', class: "cursor-pointer icon-small trigger-icon" %>
          <ul class="hidden flex absolute left-0 top-0 bg-gray-300" >
            <%= link_to lesson_block_path(block.id), class:"flex",  data: { 'turbo-method': :delete, confirm: 'Are you sure?'}  do  %>
              <%= image_tag 'icons/delete', class: "icon-small" %>
                Delete Block
            <% end %>
            <%= link_to unlink_path(block.id), class:"flex",  data: { 'turbo-method': :delete, confirm: 'Are you sure?'}  do %>
              <%= image_tag 'icons/unlink', class: "icon-small" %>
              Unlink block
            <% end %>
          </div> 
        </div>
        
        <% if block.block_type === 'RichBlock' %>
          <%= block.block.content %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
<hr>
